<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Twist Tac Toe - Choose Your Opponent</title>
  <style>
    @import url("https://fonts.googleapis.com/css?family=Annie+Use+Your+Telescope:400");
  </style>
</head>
<body>
  <div class="container">
    <!-- Main Card Container -->
    <div class="main-card">
      <!-- Title -->
      <div class="title-container">
        <h1 class="main-title">Choose Your Opponent</h1>
      </div>

      <!-- Decorative Elements -->
      <div class="decorative-x decorative-x-1">X</div>
      <div class="decorative-o decorative-o-1">O</div>
      <div class="decorative-x decorative-x-2">X</div>
      <div class="decorative-o decorative-o-2">O</div>

      <!-- Opponent Selection Cards -->
      <div class="opponent-cards-container">
        <!-- Friends Option -->
        <div class="opponent-card">
          <button class="opponent-button" onclick="selectOpponent('friends')">
            <div class="opponent-content">
              <div class="opponent-icon">üë•</div>
              <div class="opponent-text">
                <h2 class="opponent-title">Play with Friend</h2>
                <p class="opponent-description">Challenge a friend in local multiplayer. Take turns and see who's the ultimate strategist!</p>
              </div>
            </div>
          </button>
        </div>

        <!-- AI Option -->
        <div class="opponent-card ai-card">
          <button class="opponent-button" onclick="selectOpponent('ai')">
            <div class="opponent-content">
              <div class="opponent-icon">ü§ñ</div>
              <div class="opponent-text">
                <h2 class="opponent-title">Play with AI</h2>
                <p class="opponent-description">Test your skills against our intelligent AI opponent. Choose your difficulty level!</p>
              </div>
            </div>
          </button>

          <!-- AI Difficulty Slider -->
          <div id="difficultySlider" class="difficulty-slider hidden">
            <div class="difficulty-display">
              <span class="difficulty-label">Difficulty:</span>
              <span id="difficultyName" class="difficulty-name">Medium</span>
            </div>
            
            <div class="slider-container">
              <div class="slider-track">
                <div id="sliderProgress" class="slider-progress"></div>
              </div>
              <input 
                type="range" 
                id="difficultyRange" 
                min="1" 
                max="5" 
                value="3" 
                class="slider-input"
                oninput="updateDifficulty(this.value)"
              >
            </div>
            
            <div class="difficulty-labels">
              <span id="label1" class="label">Very Easy</span>
              <span id="label2" class="label">Easy</span>
              <span id="label3" class="label active">Medium</span>
              <span id="label4" class="label">Hard</span>
              <span id="label5" class="label">Expert</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <button class="back-button" onclick="goBack()">‚Üê BACK</button>
      <button id="startButton" class="start-button disabled" onclick="startGame()">START GAME ‚Üí</button>
    </div>
  </div>

  <script>
    let selectedOpponent = null;
    let currentDifficulty = 3;

    function selectOpponent(opponent) {
      selectedOpponent = opponent;
      
      // Update button states
      document.querySelectorAll('.opponent-button').forEach(btn => {
        btn.classList.remove('selected');
      });
      event.target.closest('.opponent-button').classList.add('selected');
      
      // Show/hide difficulty slider
      const slider = document.getElementById('difficultySlider');
      if (opponent === 'ai') {
        slider.classList.remove('hidden');
      } else {
        slider.classList.add('hidden');
      }
      
      // Enable start button
      document.getElementById('startButton').classList.remove('disabled');
    }

    function updateDifficulty(value) {
      currentDifficulty = parseInt(value);
      
      const difficultyNames = ['', 'Very Easy', 'Easy', 'Medium', 'Hard', 'Expert'];
      const difficultyColors = ['', 'blue', 'green', 'orange', 'red', 'purple'];
      
      // Update difficulty display
      const nameEl = document.getElementById('difficultyName');
      nameEl.textContent = difficultyNames[currentDifficulty];
      nameEl.className = `difficulty-name ${difficultyColors[currentDifficulty]}`;
      
      // Update slider progress
      const progress = document.getElementById('sliderProgress');
      progress.style.width = `${((currentDifficulty - 1) / 4) * 100}%`;
      progress.className = `slider-progress ${difficultyColors[currentDifficulty]}`;
      
      // Update labels
      for (let i = 1; i <= 5; i++) {
        const label = document.getElementById(`label${i}`);
        if (i === currentDifficulty) {
          label.className = `label active ${difficultyColors[currentDifficulty]}`;
        } else {
          label.className = 'label';
        }
      }
    }

    function startGame() {
      if (!selectedOpponent) return;
      
      const opponent = selectedOpponent === 'ai' ? `ai-${currentDifficulty}` : 'friends';
      window.location.href = `/game?opponent=${opponent}`;
    }

    function goBack() {
      window.location.href = '/desktop6';
    }
  </script>
</body>
</html>